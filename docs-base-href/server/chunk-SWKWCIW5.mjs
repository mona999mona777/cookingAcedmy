import './polyfills.server.mjs';
import{a as i}from"./chunk-ER6TBDS6.mjs";import{a as l}from"./chunk-YCKA3YXF.mjs";import{S as c,Y as d}from"./chunk-LPZ7ZZOF.mjs";var a=class extends Error{};a.prototype.name="InvalidTokenError";function u(e){return decodeURIComponent(atob(e).replace(/(.)/g,(t,r)=>{let o=r.charCodeAt(0).toString(16).toUpperCase();return o.length<2&&(o="0"+o),"%"+o}))}function h(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return u(t)}catch{return atob(t)}}function p(e,t){if(typeof e!="string")throw new a("Invalid token specified: must be a string");t||(t={});let r=t.header===!0?0:1,o=e.split(".")[r];if(typeof o!="string")throw new a(`Invalid token specified: missing part #${r+1}`);let s;try{s=h(o)}catch(n){throw new a(`Invalid token specified: invalid base64 for part #${r+1} (${n.message})`)}try{return JSON.parse(s)}catch(n){throw new a(`Invalid token specified: invalid json for part #${r+1} (${n.message})`)}}var k=(()=>{class e{constructor(){this._HttpClient=d(l),this.userdata=null,this.userId=""}addTOCart(){return this._HttpClient.post(`${i.baseUrl}/api/v1/cart`,{productId:"6428def9dc1175abc65ca061"})}orderapi(r){return this._HttpClient.post(`${i.baseUrl}/api/v1/orders/checkout-session/${localStorage.getItem("cartId")}?url=${i.urlServer}`,{shippingAddress:r})}noCartItems(){return this._HttpClient.get(`${i.baseUrl}/api/v1/cart`)}decodetoken(){localStorage.getItem("TheRealToken")!==null&&(this.userdata=p(localStorage.getItem("TheRealToken"))),this.userId=this.userdata.id}allorderapi(){return this.decodetoken(),this._HttpClient.get(`${i.baseUrl}/api/v1/orders/user/${this.userId}`)}static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275prov=c({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();export{k as a};
