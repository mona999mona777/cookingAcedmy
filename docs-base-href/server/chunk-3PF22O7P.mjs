import './polyfills.server.mjs';
import{a as O,b as g,c as k,d as $,e as I,f as y,g as j,h as z,i as H,k as J}from"./chunk-PQR4MYUP.mjs";import{a as G}from"./chunk-4HK72L6I.mjs";import"./chunk-ER6TBDS6.mjs";import{k as A}from"./chunk-Q36HUKNF.mjs";import"./chunk-YCKA3YXF.mjs";import{j as L,s as N}from"./chunk-YALRM6C7.mjs";import{c as D,d as R}from"./chunk-TNOMVZ3D.mjs";import{Ab as f,Jb as s,Kb as w,Lb as m,Ob as q,Qa as n,Qb as h,Tb as u,Ub as c,Y as E,aa as B,gb as _,ib as C,ka as S,kb as T,la as F,mb as p,qb as a,rb as r,sb as x,va as V,vb as M,zb as b}from"./chunk-LPZ7ZZOF.mjs";import"./chunk-VVCT4QZE.mjs";var P=(t,l)=>({"is-valid":t,"is-invalid":l});function K(t,l){t&1&&(a(0,"p",12),s(1),u(2,"translate"),r()),t&2&&(n(),m("",c(2,1,"formprag.email is required"),"."))}function Q(t,l){t&1&&(a(0,"p",12),s(1),u(2,"translate"),r()),t&2&&(n(),m("",c(2,1,"formprag.enter valid email"),"."))}function U(t,l){if(t&1&&(a(0,"div",7),_(1,K,3,3,"p",12)(2,Q,3,3),r()),t&2){let e,o=f(2);n(),p(1,(e=o.verifyEmailform.get("email"))!=null&&e.getError("required")?1:(e=o.verifyEmailform.get("email"))!=null&&e.getError("email")?2:-1)}}function W(t,l){t&1&&x(0,"span",9)}function X(t,l){if(t&1&&(a(0,"p",10),s(1),r()),t&2){let e=f(2);n(),m(" ",e.errorMessage," ")}}function Y(t,l){if(t&1&&(a(0,"p",11),s(1),r()),t&2){let e=f(2);n(),m(" ",e.successMessage," ")}}function Z(t,l){if(t&1){let e=M();a(0,"section",1)(1,"h2",2),s(2),u(3,"translate"),r(),a(4,"form",3),b("ngSubmit",function(){S(e);let i=f();return F(i.verifyEmailFunc())}),a(5,"div",4)(6,"label",5),s(7),u(8,"translate"),r(),x(9,"input",6),_(10,U,3,1,"div",7),r(),a(11,"button",8),s(12),u(13,"translate"),_(14,W,1,0,"span",9),r()(),_(15,X,2,1,"p",10)(16,Y,2,1,"p",11),r()}if(t&2){let e,o,i=f();n(2),m(" ",c(3,13,"forget.forget password")," "),n(2),C("formGroup",i.verifyEmailform),n(3),w(c(8,15,"enroll.email")),n(2),C("ngClass",h(19,P,!((e=i.verifyEmailform.get("email"))!=null&&e.errors)&&(((e=i.verifyEmailform.get("email"))==null?null:e.touched)||((e=i.verifyEmailform.get("email"))==null?null:e.dirty)),((e=i.verifyEmailform.get("email"))==null?null:e.errors)&&(((e=i.verifyEmailform.get("email"))==null?null:e.touched)||((e=i.verifyEmailform.get("email"))==null?null:e.dirty)))),n(),p(10,(o=i.verifyEmailform.get("email"))!=null&&o.errors&&((o=i.verifyEmailform.get("email"))!=null&&o.touched||(o=i.verifyEmailform.get("email"))!=null&&o.dirty)?10:-1),n(),T("ms-auto",i.LangText())("me-auto",!i.LangText()),n(),m(" ",c(13,17,"forget.send")," "),n(2),p(14,i.isloading?14:-1),n(),p(15,i.errorMessage?15:-1),n(),p(16,i.successMessage?16:-1)}}function ee(t,l){t&1&&(a(0,"p",12),s(1),u(2,"translate"),r()),t&2&&(n(),m("",c(2,1,"forget.reset code is required"),"."))}function te(t,l){t&1&&(a(0,"p",12),s(1),u(2,"translate"),r()),t&2&&(n(),m("",c(2,1,"forget.Enter valid Reset Code"),"."))}function ie(t,l){if(t&1&&(a(0,"div",7),_(1,ee,3,3,"p",12)(2,te,3,3),r()),t&2){let e,o=f(2);n(),p(1,(e=o.verifyCodeform.get("resetCode"))!=null&&e.getError("required")?1:(e=o.verifyCodeform.get("resetCode"))!=null&&e.getError("pattern")?2:-1)}}function ne(t,l){t&1&&x(0,"span",9)}function oe(t,l){if(t&1&&(a(0,"p",10),s(1),r()),t&2){let e=f(2);n(),m(" ",e.errorMessage," ")}}function re(t,l){if(t&1&&(a(0,"p",11),s(1),r()),t&2){let e=f(2);n(),m(" ",e.successMessage," ")}}function ae(t,l){if(t&1){let e=M();a(0,"section",13)(1,"h2",2),s(2),u(3,"translate"),r(),a(4,"form",3),b("ngSubmit",function(){S(e);let i=f();return F(i.verifyCodeFunc())}),a(5,"div",4)(6,"label",14),s(7),u(8,"translate"),r(),x(9,"input",15),_(10,ie,3,1,"div",7),r(),a(11,"button",8),s(12),u(13,"translate"),_(14,ne,1,0,"span",9),r()(),_(15,oe,2,1,"p",10)(16,re,2,1,"p",11),r()}if(t&2){let e,o,i=f();n(2),m(" ",c(3,13,"forget.verify Code")," "),n(2),C("formGroup",i.verifyCodeform),n(3),w(c(8,15,"forget.reset code")),n(2),C("ngClass",h(19,P,!((e=i.verifyCodeform.get("resetCode"))!=null&&e.errors)&&(((e=i.verifyCodeform.get("resetCode"))==null?null:e.touched)||((e=i.verifyCodeform.get("resetCode"))==null?null:e.dirty)),((e=i.verifyCodeform.get("resetCode"))==null?null:e.errors)&&(((e=i.verifyCodeform.get("resetCode"))==null?null:e.touched)||((e=i.verifyCodeform.get("resetCode"))==null?null:e.dirty)))),n(),p(10,(o=i.verifyCodeform.get("resetCode"))!=null&&o.errors&&((o=i.verifyCodeform.get("resetCode"))!=null&&o.touched||(o=i.verifyCodeform.get("resetCode"))!=null&&o.dirty)?10:-1),n(),T("ms-auto",i.LangText())("me-auto",!i.LangText()),n(),m(" ",c(13,17,"forget.send")," "),n(2),p(14,i.isloading?14:-1),n(),p(15,i.errorMessage?15:-1),n(),p(16,i.successMessage?16:-1)}}function le(t,l){t&1&&(a(0,"p",12),s(1),u(2,"translate"),r()),t&2&&(n(),m("",c(2,1,"formprag.email is required"),"."))}function se(t,l){t&1&&(a(0,"p",12),s(1),u(2,"translate"),r()),t&2&&(n(),m("",c(2,1,"formprag.enter valid email"),"."))}function de(t,l){if(t&1&&(a(0,"div",7),_(1,le,3,3,"p",12)(2,se,3,3),r()),t&2){let e,o=f(2);n(),p(1,(e=o.resetpasswordform.get("email"))!=null&&e.getError("required")?1:(e=o.resetpasswordform.get("email"))!=null&&e.getError("email")?2:-1)}}function me(t,l){t&1&&(a(0,"p",12),s(1),u(2,"translate"),r()),t&2&&(n(),m("",c(2,1,"formprag.password is required"),"."))}function pe(t,l){t&1&&(a(0,"p",12),s(1),u(2,"translate"),r()),t&2&&(n(),m("",c(2,1,"formprag.enter valid password"),"."))}function ue(t,l){if(t&1&&(a(0,"div",7),_(1,me,3,3,"p",12)(2,pe,3,3),r()),t&2){let e,o=f(2);n(),p(1,(e=o.resetpasswordform.get("newPassword"))!=null&&e.getError("required")?1:(e=o.resetpasswordform.get("newPassword"))!=null&&e.getError("pattern")?2:-1)}}function ce(t,l){t&1&&x(0,"span",9)}function fe(t,l){if(t&1&&(a(0,"p",10),s(1),r()),t&2){let e=f(2);n(),m(" ",e.errorMessage," ")}}function _e(t,l){if(t&1&&(a(0,"p",11),s(1),r()),t&2){let e=f(2);n(),m(" ",e.successMessage," ")}}function ge(t,l){if(t&1){let e=M();a(0,"section",13)(1,"h2",2),s(2),u(3,"translate"),r(),a(4,"form",3),b("ngSubmit",function(){S(e);let i=f();return F(i.resetpasswordFunc())}),a(5,"div",4)(6,"label",5),s(7),u(8,"translate"),r(),x(9,"input",16),_(10,de,3,1,"div",7),r(),a(11,"div",4)(12,"label",17),s(13),u(14,"translate"),r(),x(15,"input",18),_(16,ue,3,1,"div",7),r(),a(17,"button",8),s(18),u(19,"translate"),_(20,ce,1,0,"span",9),r()(),_(21,fe,2,1,"p",10)(22,_e,2,1,"p",11),r()}if(t&2){let e,o,i,v,d=f();n(2),m(" ",c(3,16,"forget.reset new password")," "),n(2),C("formGroup",d.resetpasswordform),n(3),w(c(8,18,"enroll.email")),n(2),C("ngClass",h(24,P,!((e=d.resetpasswordform.get("email"))!=null&&e.errors)&&(((e=d.resetpasswordform.get("email"))==null?null:e.touched)||((e=d.resetpasswordform.get("email"))==null?null:e.dirty)),((e=d.resetpasswordform.get("email"))==null?null:e.errors)&&(((e=d.resetpasswordform.get("email"))==null?null:e.touched)||((e=d.resetpasswordform.get("email"))==null?null:e.dirty)))),n(),p(10,(o=d.resetpasswordform.get("email"))!=null&&o.errors&&((o=d.resetpasswordform.get("email"))!=null&&o.touched||(o=d.resetpasswordform.get("email"))!=null&&o.dirty)?10:-1),n(3),w(c(14,20,"forget.new password")),n(2),C("ngClass",h(27,P,!((i=d.resetpasswordform.get("newPassword"))!=null&&i.errors)&&(((i=d.resetpasswordform.get("newPassword"))==null?null:i.touched)||((i=d.resetpasswordform.get("newPassword"))==null?null:i.dirty)),((i=d.resetpasswordform.get("newPassword"))==null?null:i.errors)&&(((i=d.resetpasswordform.get("newPassword"))==null?null:i.touched)||((i=d.resetpasswordform.get("newPassword"))==null?null:i.dirty)))),n(),p(16,(v=d.resetpasswordform.get("newPassword"))!=null&&v.errors&&((v=d.resetpasswordform.get("newPassword"))!=null&&v.touched||(v=d.resetpasswordform.get("newPassword"))!=null&&v.dirty)?16:-1),n(),T("ms-auto",d.LangText())("me-auto",!d.LangText()),n(),m(" ",c(19,22,"forget.send")," "),n(2),p(20,d.isloading?20:-1),n(),p(21,d.errorMessage?21:-1),n(),p(22,d.successMessage?22:-1)}}var Me=(()=>{class t{constructor(){this._AuthService=E(G),this._Router=E(A),this._PLATFORM_ID=E(V),this.isloading=!1,this.successMessage="",this.errorMessage="",this.setp=1,this.verifyEmailform=new I({email:new y(null,[g.required,g.email])}),this.verifyCodeform=new I({resetCode:new y(null,[g.required,g.pattern(/^[0-9]{6,}$/)])}),this.resetpasswordform=new I({email:new y(null,[g.required,g.email]),newPassword:new y(null,[g.required,g.pattern(/^[\w]{6,}$/)])})}verifyEmailFunc(){this.isloading=!0;let e=this.verifyEmailform.value.email;this.resetpasswordform.get("email")?.patchValue(e),this.unsubforgetpass=this._AuthService.forgetpassword(this.verifyEmailform.value).subscribe({next:o=>{this.isloading=!1,this.successMessage=o.statusMsg,this.errorMessage="",o.statusMsg=="success"&&setTimeout(()=>{this.setp=2,this.successMessage="",this.errorMessage=""},1e3)},error:o=>{this.isloading=!1,this.successMessage="",this.errorMessage=o.error.message}})}verifyCodeFunc(){this.isloading=!0,this.unsubverifyCode=this._AuthService.verifyCode(this.verifyCodeform.value).subscribe({next:e=>{this.isloading=!1,this.successMessage=e.status,this.errorMessage="",e.status=="Success"&&setTimeout(()=>{this.setp=3,this.successMessage="",this.errorMessage=""},1e3)},error:e=>{this.isloading=!1,this.successMessage="",this.errorMessage=e.error.message}})}resetpasswordFunc(){this.isloading=!0,this.unsubresetpassword=this._AuthService.resetpassword(this.resetpasswordform.value).subscribe({next:e=>{this.isloading=!1,this.successMessage="Success",this.errorMessage="",setTimeout(()=>{localStorage.setItem("token",e.token),this._Router.navigate(["/allorders"])},1e3)},error:e=>{this.isloading=!1,this.successMessage="",this.errorMessage=e.error.message}})}LangText(){if(N(this._PLATFORM_ID)){if(localStorage.getItem("lang")!=null){if(localStorage.getItem("lang")=="en")return!0;if(localStorage.getItem("lang")=="ar")return!1}else if(localStorage.getItem("lang")==null)return!0}return!1}ngOnDestroy(){this.unsubforgetpass?.unsubscribe(),this.unsubverifyCode?.unsubscribe(),this.unsubresetpassword?.unsubscribe()}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275cmp=B({type:t,selectors:[["app-forgetpassword"]],standalone:!0,features:[q],decls:4,vars:1,consts:[[1,"py-5","mt-5"],[1,"w-50","container","shadow","p-3","rounded-4","my-5"],[1,"text-center","sec-color","text-decoration-underline"],[3,"ngSubmit","formGroup"],[1,"my-2"],["for","email",1,"prag"],["id","email","type","email","formControlName","email",1,"form-control",3,"ngClass"],[1,"alert","alert-danger"],["type","submit",1,"btn-main","d-block"],[1,"fas","fa-spin","fa-spinner"],[1,"text-center","alert","alert-danger","w-50","mx-auto"],[1,"text-center","alert","alert-success","w-50","mx-auto"],[1,"m-0"],[1,"w-50","container","shadow","p-3","my-2","rounded-4","my-5"],["for","resetcode",1,"prag"],["id","resetcode","type","text","formControlName","resetCode",1,"form-control",3,"ngClass"],["readonly","","id","email","type","text","formControlName","email",1,"form-control",3,"ngClass"],["for","newpassword",1,"prag"],["id","newpassword","type","password","formControlName","newPassword",1,"form-control",3,"ngClass"]],template:function(o,i){o&1&&(a(0,"div",0),_(1,Z,17,22,"section",1)(2,ae,17,22)(3,ge,23,30),r()),o&2&&(n(),p(1,i.setp==1?1:i.setp==2?2:i.setp==3?3:-1))},dependencies:[J,j,O,k,$,z,H,L,R,D]})}}return t})();export{Me as ForgetpasswordComponent};
