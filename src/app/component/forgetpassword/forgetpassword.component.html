<div class="py-5 mt-5">
  @if (setp==1) {
  <section class="forget-content container shadow p-3 rounded-4 my-5">
    <h2 class="text-center sec-color text-decoration-underline">
      {{ "forget.forget password" | translate }}
    </h2>
    <!-- 1.forget password -->
    <form [formGroup]="verifyEmailform" (ngSubmit)="verifyEmailFunc()">
      <div class="my-2">
        <label class="prag" for="email">{{ "enroll.email" | translate }}</label>
        <input
          [ngClass]="{ 
                        'is-valid':!verifyEmailform.get('email')?.errors && (verifyEmailform.get('email')?.touched ||
                        verifyEmailform.get('email')?.dirty),
                        'is-invalid':verifyEmailform.get('email')?.errors && (verifyEmailform.get('email')?.touched ||
                        verifyEmailform.get('email')?.dirty),
                     }"
          id="email"
          type="email"
          class="form-control"
          formControlName="email"
        />
        @if (verifyEmailform.get('email')?.errors &&
        (verifyEmailform.get('email')?.touched
        ||verifyEmailform.get('email')?.dirty)){
        <div class="alert alert-danger">
          @if (verifyEmailform.get('email')?.getError('required')) {
          <p class="m-0">{{ "formprag.email is required" | translate }}.</p>
          } @else if (verifyEmailform.get('email')?.getError('email')) {
          <p class="m-0">{{ "formprag.enter valid email" | translate }}.</p>
          }
        </div>
        }
      </div>
      <button
        class="btn-main d-block"
        [class.ms-auto]="LangText()"
        [class.me-auto]="!LangText()"
        type="submit"
      >
        {{ "forget.send" | translate }} @if (isloading) {
        <span class="fas fa-spin fa-spinner"></span>}
      </button>
    </form>
    @if (errorMessage) {
    <p class="text-center alert alert-danger w-75 mx-auto mt-3">
      {{ errorMessage }}
    </p>
    } @if (successMessage) {
    <p class="text-center alert alert-success w-75 mx-auto mt-3">
      {{ successMessage }}
    </p>
    }
  </section>
  } @else if (setp==2) {
  <section class="forget-content container shadow p-3 my-2 rounded-4 my-5">
    <h2 class="text-center sec-color text-decoration-underline">
      {{ "forget.verify Code" | translate }}
    </h2>
    <!-- 2.verifyCode send on email -->
    <form [formGroup]="verifyCodeform" (ngSubmit)="verifyCodeFunc()">
      <div class="my-2">
        <label class="prag" for="resetcode">{{
          "forget.reset code" | translate
        }}</label>
        <input
          [ngClass]="{ 
                        'is-valid':!verifyCodeform.get('resetCode')?.errors && (verifyCodeform.get('resetCode')?.touched ||
                        verifyCodeform.get('resetCode')?.dirty),
                        'is-invalid':verifyCodeform.get('resetCode')?.errors && (verifyCodeform.get('resetCode')?.touched ||
                        verifyCodeform.get('resetCode')?.dirty),
                     }"
          id="resetcode"
          type="text"
          class="form-control"
          formControlName="resetCode"
        />
        @if (verifyCodeform.get('resetCode')?.errors &&
        (verifyCodeform.get('resetCode')?.touched
        ||verifyCodeform.get('resetCode')?.dirty)){
        <div class="alert alert-danger">
          @if (verifyCodeform.get('resetCode')?.getError('required')) {
          <p class="m-0">{{ "forget.reset code is required" | translate }}.</p>
          } @else if (verifyCodeform.get('resetCode')?.getError('pattern')) {
          <p class="m-0">{{ "forget.Enter valid Reset Code" | translate }}.</p>
          }
        </div>
        }
      </div>
      <button
        class="btn-main d-block"
        [class.ms-auto]="LangText()"
        [class.me-auto]="!LangText()"
        type="submit"
      >
        {{ "forget.send" | translate }} @if (isloading) {
        <span class="fas fa-spin fa-spinner"></span>}
      </button>
    </form>
    @if (errorMessage) {
    <p class="text-center alert alert-danger w-75 mx-auto mt-3">
      {{ errorMessage }}
    </p>
    } @if (successMessage) {
    <p class="text-center alert alert-success w-75 mx-auto mt-3">
      {{ successMessage }}
    </p>
    }
  </section>
  } @else if (setp==3) {
  <section class="forget-content container shadow p-3 my-2 rounded-4 my-5">
    <h2 class="text-center sec-color text-decoration-underline">
      {{ "forget.reset new password" | translate }}
    </h2>
    <!-- 3.creat new password -->
    <form [formGroup]="resetpasswordform" (ngSubmit)="resetpasswordFunc()">
      <div class="my-2">
        <label class="prag" for="email">{{ "enroll.email" | translate }}</label>
        <input
          readonly
          [ngClass]="{ 
                      'is-valid':!resetpasswordform.get('email')?.errors && (resetpasswordform.get('email')?.touched ||
                      resetpasswordform.get('email')?.dirty),
                      'is-invalid':resetpasswordform.get('email')?.errors && (resetpasswordform.get('email')?.touched ||
                      resetpasswordform.get('email')?.dirty),
                   }"
          id="email"
          type="text"
          class="form-control"
          formControlName="email"
        />
        @if (resetpasswordform.get('email')?.errors &&
        (resetpasswordform.get('email')?.touched
        ||resetpasswordform.get('email')?.dirty)){
        <div class="alert alert-danger">
          @if (resetpasswordform.get('email')?.getError('required')) {
          <p class="m-0">{{ "formprag.email is required" | translate }}.</p>
          } @else if (resetpasswordform.get('email')?.getError('email')) {
          <p class="m-0">{{ "formprag.enter valid email" | translate }}.</p>
          }
        </div>
        }
      </div>
      <div class="my-2">
        <label class="prag" for="newpassword">{{
          "forget.new password" | translate
        }}</label>
        <input
          [ngClass]="{ 
                      'is-valid':!resetpasswordform.get('newPassword')?.errors && (resetpasswordform.get('newPassword')?.touched ||
                      resetpasswordform.get('newPassword')?.dirty),
                      'is-invalid':resetpasswordform.get('newPassword')?.errors && (resetpasswordform.get('newPassword')?.touched ||
                      resetpasswordform.get('newPassword')?.dirty),
                   }"
          id="newpassword"
          type="password"
          class="form-control"
          formControlName="newPassword"
        />
        @if (resetpasswordform.get('newPassword')?.errors &&
        (resetpasswordform.get('newPassword')?.touched
        ||resetpasswordform.get('newPassword')?.dirty)){
        <div class="alert alert-danger">
          @if (resetpasswordform.get('newPassword')?.getError('required')) {
          <p class="m-0">{{ "formprag.password is required" | translate }}.</p>
          } @else if (resetpasswordform.get('newPassword')?.getError('pattern'))
          {
          <p class="m-0">{{ "formprag.enter valid password" | translate }}.</p>
          }
        </div>
        }
      </div>
      <button
        class="btn-main d-block"
        [class.ms-auto]="LangText()"
        [class.me-auto]="!LangText()"
        type="submit"
      >
        {{ "forget.send" | translate }} @if (isloading) {
        <span class="fas fa-spin fa-spinner"></span>}
      </button>
    </form>
    @if (errorMessage) {
    <p class="text-center alert alert-danger w-75 mx-auto mt-3">
      {{ errorMessage }}
    </p>
    } @if (successMessage) {
    <p class="text-center alert alert-success w-75 mx-auto mt-3">
      {{ successMessage }}
    </p>
    }
  </section>
  }
</div>
